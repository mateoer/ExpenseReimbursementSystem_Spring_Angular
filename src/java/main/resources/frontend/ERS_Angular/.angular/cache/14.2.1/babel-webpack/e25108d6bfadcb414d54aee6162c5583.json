{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/register-service.service\";\nimport * as i2 from \"src/app/services/login-service.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\n\nfunction RegisterComponent_option_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const role_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", role_r7);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", role_r7, \" \");\n  }\n}\n\nfunction RegisterComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelementStart(2, \"a\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r3.usernameMessage);\n  }\n}\n\nfunction RegisterComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"br\");\n    i0.ɵɵelementStart(2, \"a\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r5.emailAvailableMessage);\n  }\n}\n\nfunction RegisterComponent_div_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.errorCreatingUser, \" \");\n  }\n}\n\nexport let RegisterComponent = /*#__PURE__*/(() => {\n  class RegisterComponent {\n    constructor(registerService, loginService, _route, location) {\n      this.registerService = registerService;\n      this.loginService = loginService;\n      this._route = _route;\n      this.location = location;\n      this.userRole = ['', 'MANAGER', 'EMPLOYEE'];\n      this.selectedRole = ' ';\n      this.registrationForm = {\n        user: {\n          userId: NaN,\n          username: '',\n          password: '',\n          firstName: '',\n          lastName: '',\n          email: '',\n          userRole: '',\n          profilePicName: ''\n        },\n        found: false\n      };\n      this.re_email = '';\n      this.re_password = '';\n      this.usernameMessage = '';\n      this.readyUsername = false;\n      this.emailAvailableMessage = '';\n      this.emailMessage = '';\n      this.readyEmail = false;\n      this.passwordMessage = '';\n      this.newlyCreatedUser = {\n        user: {\n          userId: 0,\n          username: '',\n          password: '',\n          firstName: '',\n          lastName: '',\n          email: '',\n          userRole: '',\n          profilePicName: ''\n        },\n        found: false\n      };\n      this.errorCreatingUser = '';\n      history.pushState(null, \"null\", window.location.href);\n      this.location.onPopState(() => {\n        history.pushState(null, \"null\", window.location.href);\n      });\n    }\n\n    ngOnInit() {}\n\n    register() {\n      let FName = this.registrationForm.user.firstName != '';\n      let LName = this.registrationForm.user.lastName != '';\n      let uName = this.readyUsername == true;\n      let mail = this.readyEmail == true && this.registrationForm.user.email == this.re_email && (this.re_email != '' || ' ');\n      let uRole = this.registrationForm.user.userRole != '';\n      let PasW = this.registrationForm.user.password == this.re_password && (this.re_password != '' || ' ');\n\n      if (FName && LName && uRole && uName && mail && PasW) {\n        this.registerService.registerNewUser(this.registrationForm).subscribe(e => {\n          if (e.found == true) {\n            this.registrationForm = e;\n            this.newlyCreatedUser = e;\n            this.sessionSave();\n            const moveTo = this.registrationForm.user.userRole.toLowerCase();\n\n            this._route.navigate([`/${moveTo}`]);\n          }\n        });\n      } else {\n        this.errorCreatingUser = \"Something went wrong\";\n      }\n    }\n\n    sessionSave() {\n      sessionStorage.setItem('userId', JSON.stringify(this.newlyCreatedUser.user.userId));\n      sessionStorage.setItem('username', this.newlyCreatedUser.user.username);\n      sessionStorage.setItem('password', this.newlyCreatedUser.user.password);\n      sessionStorage.setItem('firstName', this.newlyCreatedUser.user.firstName);\n      sessionStorage.setItem('lastName', this.newlyCreatedUser.user.lastName);\n      sessionStorage.setItem('email', this.newlyCreatedUser.user.lastName);\n      sessionStorage.setItem('userRole', this.newlyCreatedUser.user.userRole);\n      sessionStorage.setItem('profilePicture', this.newlyCreatedUser.user.profilePicName);\n      sessionStorage.setItem('found', JSON.stringify(this.newlyCreatedUser.found));\n    }\n\n    onSelectRole() {\n      if (this.selectedRole != '') {\n        this.registrationForm.user.userRole = this.selectedRole;\n      }\n    }\n\n    onUsernameFilled(a, input = null) {\n      this.registrationForm.user.username = a;\n\n      if (this.registrationForm.user.username !== ' ') {\n        this.registerService.checkUsername(this.registrationForm.user.username).subscribe(e => {\n          this.usernameMessage = e;\n\n          if (this.usernameMessage == \"Username is available\") {\n            this.readyUsername = true;\n          }\n        });\n      }\n    }\n\n    onEmailFilled(a, input = null) {\n      this.registrationForm.user.email = a;\n\n      if (this.registrationForm.user.email !== ' ') {\n        this.registerService.checkEmail(this.registrationForm.user.email).subscribe(e => {\n          this.emailAvailableMessage = e;\n\n          if (this.emailAvailableMessage == '') {\n            this.readyEmail = true;\n          }\n        });\n      }\n    }\n\n  }\n\n  RegisterComponent.ɵfac = function RegisterComponent_Factory(t) {\n    return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.RegisterService), i0.ɵɵdirectiveInject(i2.LoginService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.LocationStrategy));\n  };\n\n  RegisterComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RegisterComponent,\n    selectors: [[\"app-register\"]],\n    decls: 50,\n    vars: 19,\n    consts: [[1, \"background\"], [\"id\", \"login-form\"], [1, \"card\", \"card-container\"], [\"id\", \"profile-img\", \"src\", \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\", 1, \"profile-img-card\"], [\"novalidate\", \"\", 3, \"ngSubmit\"], [\"myLoginGroup\", \"ngForm\"], [2, \"display\", \"inline-block\", \"white-space\", \"nowrap\", \"align-items\", \"center\"], [\"for\", \"username\"], [\"required\", \"\", \"type\", \"text\", \"name\", \"firstName\", \"placeholder\", \"enter first name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"required\", \"\", \"type\", \"text\", \"name\", \"lastName\", \"placeholder\", \"enter last name\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"userRole\"], [\"id\", \"filterReis\", \"name\", \"reimbs\", \"required\", \"\", 1, \"btn\", 2, \"margin-right\", \"10px\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"required\", \"\", \"type\", \"text\", \"name\", \"username\", \"placeholder\", \"enter username\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"input\", \"\"], [4, \"ngIf\"], [\"for\", \"email\"], [\"required\", \"\", \"type\", \"text\", \"name\", \"email\", \"placeholder\", \"enter email\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"re-email\"], [\"required\", \"\", \"type\", \"text\", \"name\", \"re-email\", \"placeholder\", \"re-enter email\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"emailMessage\", \"registrationForm\", \"re_email\"], [\"for\", \"password\"], [\"required\", \"\", \"type\", \"password\", \"name\", \"password\", \"placeholder\", \"enter password\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"re-password\"], [\"required\", \"\", \"type\", \"password\", \"name\", \"re-password\", \"placeholder\", \"re-enter password\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [3, \"passwordMessage\", \"registrationForm\", \"re_password\"], [1, \"form-group\"], [\"type\", \"submit\", \"value\", \"Register\", 1, \"btn\", \"btn-primary\", \"form-control\", 3, \"disabled\"], [\"type\", \"submit\", \"value\", \"Cancel\", \"routerLink\", \"/login\", 1, \"btn\", \"btn-primary\", \"form-control\"], [3, \"value\"]],\n    template: function RegisterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r9 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n        i0.ɵɵelement(3, \"img\", 3);\n        i0.ɵɵelementStart(4, \"form\", 4, 5);\n        i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_4_listener() {\n          return ctx.register();\n        });\n        i0.ɵɵelementStart(6, \"div\", 6)(7, \"label\", 7);\n        i0.ɵɵtext(8, \"First Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_9_listener($event) {\n          return ctx.registrationForm.user.firstName = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"label\", 7);\n        i0.ɵɵtext(11, \"Last Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_12_listener($event) {\n          return ctx.registrationForm.user.lastName = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"label\", 10);\n        i0.ɵɵtext(14, \"User Role\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"select\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_select_ngModelChange_15_listener($event) {\n          return ctx.selectedRole = $event;\n        })(\"ngModelChange\", function RegisterComponent_Template_select_ngModelChange_15_listener() {\n          return ctx.onSelectRole();\n        });\n        i0.ɵɵtemplate(16, RegisterComponent_option_16_Template, 2, 2, \"option\", 12);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(17, \"br\")(18, \"hr\");\n        i0.ɵɵelementStart(19, \"label\", 7);\n        i0.ɵɵtext(20, \"Username\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"input\", 13, 14);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_21_listener($event) {\n          i0.ɵɵrestoreView(_r9);\n\n          const _r2 = i0.ɵɵreference(22);\n\n          return i0.ɵɵresetView(ctx.onUsernameFilled($event, _r2));\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(23, RegisterComponent_div_23_Template, 4, 1, \"div\", 15);\n        i0.ɵɵelementStart(24, \"label\", 16);\n        i0.ɵɵtext(25, \"Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"input\", 17, 14);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_26_listener($event) {\n          i0.ɵɵrestoreView(_r9);\n\n          const _r2 = i0.ɵɵreference(22);\n\n          return i0.ɵɵresetView(ctx.onEmailFilled($event, _r2));\n        })(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_26_listener($event) {\n          return ctx.registrationForm.user.email = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(28, RegisterComponent_div_28_Template, 4, 1, \"div\", 15);\n        i0.ɵɵelementStart(29, \"label\", 18);\n        i0.ɵɵtext(30, \"Re-Email\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"input\", 19);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_31_listener($event) {\n          return ctx.re_email = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(32, \"br\")(33, \"app-child-email-check\", 20)(34, \"hr\");\n        i0.ɵɵelementStart(35, \"label\", 21);\n        i0.ɵɵtext(36, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"input\", 22);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_37_listener($event) {\n          return ctx.registrationForm.user.password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"label\", 23);\n        i0.ɵɵtext(39, \"Re-Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"input\", 24);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_40_listener($event) {\n          return ctx.re_password = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(41, \"br\")(42, \"app-child-password-check\", 25)(43, \"br\");\n        i0.ɵɵelementStart(44, \"div\", 26);\n        i0.ɵɵelement(45, \"input\", 27);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(46, RegisterComponent_div_46_Template, 2, 1, \"div\", 15);\n        i0.ɵɵelement(47, \"br\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(48, \"br\")(49, \"input\", 28);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(5);\n\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"ngModel\", ctx.registrationForm.user.firstName);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.registrationForm.user.lastName);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.selectedRole);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.userRole);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.registrationForm.user.username);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.usernameMessage != \"\" && ctx.registrationForm.user.username != \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.registrationForm.user.email);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.emailAvailableMessage != \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.re_email);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"emailMessage\", ctx.emailMessage)(\"registrationForm\", ctx.registrationForm)(\"re_email\", ctx.re_email);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.registrationForm.user.password);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.re_password);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"passwordMessage\", ctx.passwordMessage)(\"registrationForm\", ctx.registrationForm)(\"re_password\", ctx.re_password);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", _r0.invalid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorCreatingUser != \"\");\n      }\n    },\n    styles: [\"label[_ngcontent-%COMP%]{display:block;margin-top:10px}.card-container.card[_ngcontent-%COMP%]{max-width:660px!important;padding:40px}.card[_ngcontent-%COMP%]{background-color:#f7f7f7;padding:20px 25px 30px;margin:50px auto 25px;border-radius:2px;box-shadow:0 2px 2px #0000004d}.profile-img-card[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 10px;display:block;border-radius:50%}.login-form[_ngcontent-%COMP%]{position:relative;height:560px;width:405px;margin:auto;padding:60px;background-size:cover;box-shadow:0 30px 60px -5px #000}.background[_ngcontent-%COMP%]{background-image:url(photo-1657278127206-3299435f1cad.6e580ed13cd010ea.jpg);background-repeat:no-repeat;background-size:cover;background-attachment:fixed;background-position:center;padding-top:5%;padding-bottom:15%}\"]\n  });\n  return RegisterComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}